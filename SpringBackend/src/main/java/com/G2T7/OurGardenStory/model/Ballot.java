package com.G2T7.OurGardenStory.model;

import javax.validation.constraints.NotNull;

import com.amazonaws.services.dynamodbv2.datamodeling.*;
import lombok.*;

import java.time.*;

@Getter
@Setter
@Data
@AllArgsConstructor
@NoArgsConstructor
@DynamoDBTable(tableName = "Ballot")

public class Ballot {
    @DynamoDBHashKey
    @DynamoDBAutoGeneratedKey
    private String ballotId;

    @DynamoDBTypeConverted( converter = LocalDateTimeConverter.class )
    private LocalDateTime submitDateTime;

    @DynamoDBTypeConverted( converter = LocalDateTimeConverter.class )
    private LocalDateTime leaseStart;

    @DynamoDBAttribute
    private String leaseDuration = "3Y";

    @DynamoDBAttribute
    private String status = "PENDING";

    @DynamoDBAttribute
    private String garden;

    @DynamoDBTypeConverted( converter = LocalDateTimeConverter.class )
    private LocalDateTime startDateTime;

    @DynamoDBAttribute
    private String username;

    static public class LocalDateTimeConverter implements DynamoDBTypeConverter<String, LocalDateTime> {

        @Override
        public String convert( final LocalDateTime time ) {
            return time.toString();
        }
        @Override
        public LocalDateTime unconvert( final String stringValue ) {
            return LocalDateTime.parse(stringValue);
        }
    }
}
